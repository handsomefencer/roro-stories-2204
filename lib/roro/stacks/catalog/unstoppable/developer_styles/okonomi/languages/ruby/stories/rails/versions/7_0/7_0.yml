preface: some string

env:

  base:
    rails_version:
      name: Ruby on Rails minor version
      value: 7.0
    app_name:
      name: Name for your app
      value: 'unstoppable app name'

actions:
  - directory 'stage_one', '.', @env
  - run "sudo docker-compose build"
  - run "sudo docker-compose run --no-deps web rails new . --force --database=postgresql"
  - run "sudo chown -R $USER:$USER ."
  - template 'stage_two/database.yml.tt', './config/database.yml', @env
  - run "sudo docker-compose build"
  - run "sudo chown -R $USER:$USER ."
  - run "sudo docker-compose run web rake db:create"
  - run "sudo docker-compose up -d"
