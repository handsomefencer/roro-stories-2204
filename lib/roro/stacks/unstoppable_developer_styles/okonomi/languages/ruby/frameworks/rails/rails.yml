preface: A dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant
  syntax that is natural to read and easy to write.

env:
  base:
    rails_version:
      name: Ruby on Rails minor version
      value: 7.0

actions:
  - copy_manifest
  - run 'DOCKER_BUILDKIT=1 docker build --file Dockerfile --output . .'
  - polish
  - chmod 'entrypoints/docker-entrypoint.sh', 0755
  - |
    generator = Roro::CLI.new
    generator.generate_mise
    generator.generate_containers 'app', 'database', 'redis', 'sidekiq'
    generator.generate_environments @env
    generator.generate_keys

#  - polish
#  - run 'DOCKER_BUILDKIT=1 docker build --file Dockerfile --output . .'
#  - directory 'stage_two', '.', @env
#
#  - |
#    insert_into_file(
#    'docker-compose.yml',
#    partial('service_app'),
#    :after => "\nservices:")
#
#  - append_to_file(
#      'docker-compose.yml',
#      partial('volumes'))
#  - |
#    generator = Roro::CLI.new
#    generator.generate_mise
#    generator.generate_containers 'app', 'database', 'redis', 'sidekiq'
#    generator.generate_environments @env
#    generator.generate_keys
