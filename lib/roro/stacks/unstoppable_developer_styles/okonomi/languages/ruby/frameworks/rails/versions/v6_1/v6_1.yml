preface: some string

env:
  base:
    git_config_user_name:
      name: The name you'd like associated with git activities
      value: Jane Doe
    git_config_user_email:
      name: The email address you'd like associated with git activities
      value: jane.doe@example.com
    rails_version:
      name: Ruby on Rails minor version
      value: 6.1
    JOB_WORKER_URL:
      name: Reids job worker url
      value: redis://redis:6379/0
    REDIS_URL:
      name: Reids url
      value: redis://redis:6379/0

actions:
  - directory 'stage_one', '.', @env
  - run 'sudo chown -R $USER:$USER .'
  - |
    generator = Roro::CLI.new
    generator.generate_mise
    generator.generate_containers 'app', 'database', 'redis', 'sidekiq'
    generator.generate_environments @env
    generator.generate_keys
  - run 'sudo chown -R $USER:$USER .'
  - uncomment_lines 'config/environments/production.rb', /# config.require_master_key = true/
  - gsub_file 'config/environments/production.rb', /require_master_key = true/, 'require_master_key = false'
  - run "docker-compose build"
  - run "docker-compose up"
